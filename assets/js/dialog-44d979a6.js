import{d as D,M as E,r as J,X as K,s as O,a as j,o as G,c as d,e as _,f as b,j as e,k as l,g as S,i as s,t as V,G as c,H as U,B as X,J as q,aD as Q,_ as W}from"./index-f97ca1e0.js";const Y={class:"system-menu-dialog-container"},Z={key:0},$={class:"dialog-footer"},ee=D({name:"systemMenuDialog"}),oe=D({...ee,emits:["refresh"],setup(le,{expose:w,emit:T}){const L=E(()=>W(()=>import("./index-60237a04.js"),["assets/js/index-60237a04.js","assets/js/index-f97ca1e0.js","assets/css/index-a7bdd87a.css","assets/js/getStyleSheets-5de41919.js","assets/css/index-47b5c078.css"])),A=J(),C=K(),{routesList:v}=O(C),a=j({ruleForm:{menuSuperior:[],menuType:"menu",name:"",component:"",componentAlias:"",isLink:!1,menuSort:0,path:"",redirect:"",meta:{title:"",icon:"",isHide:!1,isKeepAlive:!0,isAffix:!1,isLink:"",isIframe:!1,roles:""},btnPower:""},menuData:[],dialog:{isShowDialog:!1,type:"",title:"",submitTxt:""}}),g=p=>{const o=[];return p.map(n=>{var m;n.title=Q.global.t((m=n.meta)==null?void 0:m.title),o.push({...n}),n.children&&g(n.children)}),o},I=(p,o)=>{p==="edit"?(o.menuType="menu",o.menuSort=Math.floor(Math.random()*100),a.ruleForm=JSON.parse(JSON.stringify(o)),a.dialog.title="修改菜单",a.dialog.submitTxt="修 改"):(a.dialog.title="新增菜单",a.dialog.submitTxt="新 增"),a.dialog.type=p,a.dialog.isShowDialog=!0},x=()=>{a.dialog.isShowDialog=!1},h=()=>{a.ruleForm.meta.isIframe?a.ruleForm.isLink=!0:a.ruleForm.isLink=!1},M=()=>{x()},N=()=>{x(),T("refresh")};return G(()=>{a.menuData=g(v.value)}),w({openDialog:I}),(p,o)=>{const n=d("el-cascader"),m=d("el-form-item"),u=d("el-col"),r=d("el-radio"),f=d("el-radio-group"),i=d("el-input"),F=d("el-option"),B=d("el-select"),P=d("el-input-number"),R=d("el-row"),H=d("el-form"),k=d("el-button"),z=d("el-dialog");return _(),b("div",Y,[e(z,{title:a.dialog.title,modelValue:a.dialog.isShowDialog,"onUpdate:modelValue":o[17]||(o[17]=t=>a.dialog.isShowDialog=t),width:"769px"},{footer:l(()=>[S("span",$,[e(k,{onClick:M,size:"default"},{default:l(()=>[s("取 消")]),_:1}),e(k,{type:"primary",onClick:N,size:"default"},{default:l(()=>[s(V(a.dialog.submitTxt),1)]),_:1})])]),default:l(()=>[e(H,{ref_key:"menuDialogFormRef",ref:A,model:a.ruleForm,size:"default","label-width":"80px"},{default:l(()=>[e(R,{gutter:35},{default:l(()=>[e(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:l(()=>[e(m,{label:"上级菜单"},{default:l(()=>[e(n,{options:a.menuData,props:{checkStrictly:!0,value:"path",label:"title"},placeholder:"请选择上级菜单",clearable:"",class:"w100",modelValue:a.ruleForm.menuSuperior,"onUpdate:modelValue":o[0]||(o[0]=t=>a.ruleForm.menuSuperior=t)},{default:l(({node:t,data:y})=>[S("span",null,V(y.title),1),t.isLeaf?c("",!0):(_(),b("span",Z," ("+V(y.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:l(()=>[e(m,{label:"菜单类型"},{default:l(()=>[e(f,{modelValue:a.ruleForm.menuType,"onUpdate:modelValue":o[1]||(o[1]=t=>a.ruleForm.menuType=t)},{default:l(()=>[e(r,{label:"menu"},{default:l(()=>[s("菜单")]),_:1}),e(r,{label:"btn"},{default:l(()=>[s("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"菜单名称"},{default:l(()=>[e(i,{modelValue:a.ruleForm.meta.title,"onUpdate:modelValue":o[2]||(o[2]=t=>a.ruleForm.meta.title=t),placeholder:"格式：message.router.xxx",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a.ruleForm.menuType==="menu"?(_(),b(U,{key:0},[e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"路由名称"},{default:l(()=>[e(i,{modelValue:a.ruleForm.name,"onUpdate:modelValue":o[3]||(o[3]=t=>a.ruleForm.name=t),placeholder:"路由中的 name 值",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"路由路径"},{default:l(()=>[e(i,{modelValue:a.ruleForm.path,"onUpdate:modelValue":o[4]||(o[4]=t=>a.ruleForm.path=t),placeholder:"路由中的 path 值",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"重定向"},{default:l(()=>[e(i,{modelValue:a.ruleForm.redirect,"onUpdate:modelValue":o[5]||(o[5]=t=>a.ruleForm.redirect=t),placeholder:"请输入路由重定向",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"菜单图标"},{default:l(()=>[e(X(L),{placeholder:"请输入菜单图标",modelValue:a.ruleForm.meta.icon,"onUpdate:modelValue":o[6]||(o[6]=t=>a.ruleForm.meta.icon=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"组件路径"},{default:l(()=>[e(i,{modelValue:a.ruleForm.componentAlias,"onUpdate:modelValue":o[7]||(o[7]=t=>a.ruleForm.componentAlias=t),placeholder:"组件路径",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"链接地址"},{default:l(()=>[e(i,{modelValue:a.ruleForm.meta.isLink,"onUpdate:modelValue":o[8]||(o[8]=t=>a.ruleForm.meta.isLink=t),placeholder:"外链/内嵌时链接地址（http:xxx.com）",clearable:"",disabled:!a.ruleForm.isLink},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"权限标识"},{default:l(()=>[e(B,{modelValue:a.ruleForm.meta.roles,"onUpdate:modelValue":o[9]||(o[9]=t=>a.ruleForm.meta.roles=t),multiple:"",placeholder:"取角色管理",clearable:"",class:"w100"},{default:l(()=>[e(F,{label:"admin",value:"admin"}),e(F,{label:"common",value:"common"})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)):c("",!0),a.ruleForm.menuType==="btn"?(_(),q(u,{key:1,xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"权限标识"},{default:l(()=>[e(i,{modelValue:a.ruleForm.btnPower,"onUpdate:modelValue":o[10]||(o[10]=t=>a.ruleForm.btnPower=t),placeholder:"请输入权限标识",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):c("",!0),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"菜单排序"},{default:l(()=>[e(P,{modelValue:a.ruleForm.menuSort,"onUpdate:modelValue":o[11]||(o[11]=t=>a.ruleForm.menuSort=t),"controls-position":"right",placeholder:"请输入排序",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),a.ruleForm.menuType==="menu"?(_(),b(U,{key:2},[e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"是否隐藏"},{default:l(()=>[e(f,{modelValue:a.ruleForm.meta.isHide,"onUpdate:modelValue":o[12]||(o[12]=t=>a.ruleForm.meta.isHide=t)},{default:l(()=>[e(r,{label:!0},{default:l(()=>[s("隐藏")]),_:1}),e(r,{label:!1},{default:l(()=>[s("不隐藏")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"页面缓存"},{default:l(()=>[e(f,{modelValue:a.ruleForm.meta.isKeepAlive,"onUpdate:modelValue":o[13]||(o[13]=t=>a.ruleForm.meta.isKeepAlive=t)},{default:l(()=>[e(r,{label:!0},{default:l(()=>[s("缓存")]),_:1}),e(r,{label:!1},{default:l(()=>[s("不缓存")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"是否固定"},{default:l(()=>[e(f,{modelValue:a.ruleForm.meta.isAffix,"onUpdate:modelValue":o[14]||(o[14]=t=>a.ruleForm.meta.isAffix=t)},{default:l(()=>[e(r,{label:!0},{default:l(()=>[s("固定")]),_:1}),e(r,{label:!1},{default:l(()=>[s("不固定")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"是否外链"},{default:l(()=>[e(f,{modelValue:a.ruleForm.isLink,"onUpdate:modelValue":o[15]||(o[15]=t=>a.ruleForm.isLink=t),disabled:a.ruleForm.meta.isIframe},{default:l(()=>[e(r,{label:!0},{default:l(()=>[s("是")]),_:1}),e(r,{label:!1},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(m,{label:"是否内嵌"},{default:l(()=>[e(f,{modelValue:a.ruleForm.meta.isIframe,"onUpdate:modelValue":o[16]||(o[16]=t=>a.ruleForm.meta.isIframe=t),onChange:h},{default:l(()=>[e(r,{label:!0},{default:l(()=>[s("是")]),_:1}),e(r,{label:!1},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)):c("",!0)]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}});export{oe as default};
