import{_ as se}from"./index-b528fbfa.js";import{a as g}from"./element-plus-08547807.js";import{k as P,aN as te,e as M,$ as ie,i as ne,ah as t,o as a,c as $,W as l,Q as s,U as p,a as h,V as ae,T as c,J as de,L as u,P as m,F as re,u as pe}from"./@vue-d9027515.js";import"./pinia-a73ffef5.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-a2fac16f.js";import"./vue-i18n-e0b9a81d.js";import"./@intlify-9e8a497c.js";import"./source-map-7d7e1c08.js";import"./vue-b46b26c7.js";import"./js-cookie-cf83ad76.js";import"./@element-plus-6327e551.js";import"./nprogress-8d2808ea.js";import"./axios-aba6f0e0.js";import"./qs-bbfcbdf3.js";import"./side-channel-eafc5c70.js";import"./get-intrinsic-b9397c9a.js";import"./has-symbols-e8f3ca0e.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-9ceb8f5b.js";import"./object-inspect-7b08a46e.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-0ee01be3.js";import"./lodash-es-36eb724a.js";import"./@vueuse-2d9216d7.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-6aac7dfa.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-682dc3ac.js";const ce={class:"send border",style:{"flex-direction":"column"}},ue={key:0,class:"send-quote"},me=h("span",{style:{float:"left",color:"#8f959e","line-height":"30px"}}," | ",-1),fe={class:"send-panel direction-column",style:{background:"#ffffff"}},be={style:{display:"flex","flex-direction":"row","justify-content":"flex-end",padding:"5px 11px",background:"#ffffff",width:"100%"}},ge={class:"el-dropdown-link"},he=P({name:"chatSendPanel"}),Ze=P({...he,props:{currentMeeting:Object,placeholder:{type:String,default:"请输入"},minRows:{type:Number,default:1},maxRows:{type:Number,default:4},chatPlan:{},isSingleRow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hasAudio:{type:Boolean,default:!0},hasVideo:{type:Boolean,default:!0},videoMode:{type:Number,default:1}},emits:["clearQouteAction","handleKeydown","clickSend","onFileChange","openCamera","openVoice","sendAudio","shareDesktop","setting","clickRecording"],setup(f,{expose:z,emit:d}){const n=f,B=te(()=>se(()=>import("./audioDialog-7b2d0363.js"),["assets/js/audioDialog-7b2d0363.js","assets/js/file-a5f5b941.js","assets/js/axios-aba6f0e0.js","assets/js/element-plus-08547807.js","assets/js/@vue-d9027515.js","assets/js/lodash-es-36eb724a.js","assets/js/@vueuse-2d9216d7.js","assets/js/@element-plus-6327e551.js","assets/js/@popperjs-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-6aac7dfa.js","assets/js/@intlify-9e8a497c.js","assets/js/source-map-7d7e1c08.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-1d60d822.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-682dc3ac.js","assets/js/plugin-vueexport-helper-c27b6911.js","assets/css/audioDialog-6ddebdb4.css"])),A="https://akram8.github.io/oginix-vite-demo/"+"/common/sys/file/upload",w=M(null),C=M(),o=ie({isSingleRow:!1,sendMessage:"",panelClass:n.isSingleRow?"direction-row":"direction-column",hasSpeech:!1,recognition:null,recording:!1,disableBtnVoice:!0,disableBtnCamera1:!0,disableBtnCamera2:!0,disableBtnShare:!0,disableBtnSetting:!0}),D=()=>{d("clearQouteAction")},v=e=>{const i=o.sendMessage;!e.shiftKey&&e.keyCode==13&&(o.sendMessage=""),d("handleKeydown",e,i)},Q=()=>{const e=o.sendMessage;o.sendMessage="",d("clickSend",e)},F=e=>{d("onFileChange",e)},N=e=>e.size/1024/1024<2?!0:(g.error("文件大小不能超过2MB"),!1),L=(e,i,_)=>{e.code==200?g.success("上传成功"):g.error(e.msg)},U=()=>{w.value.submit()},E=()=>{o.sendMessage=""},I=e=>{e==="voice"?S():e==="camera1"?y(1):e==="camera2"?y(2):e==="share"?x():e==="setting"&&R()},y=e=>{d("openCamera",e)},S=()=>{d("openVoice")},K=e=>{d("sendAudio",e)},x=()=>{d("shareDesktop")},R=()=>{d("setting")},T=()=>{n.disabled||(C.value.openAudioDialog(),d("clickRecording"))},j=()=>{const e=window;e.SpeechRecognition||e.webkitSpeechRecognition||e.mozSpeechRecognition||e.msSpeechRecognition?(o.hasSpeech=!0,o.recognition=new(e.SpeechRecognition||e.webkitSpeechRecognition||e.mozSpeechRecognition||e.msSpeechRecognition),o.recognition.lang="zh-CN",o.recognition.continuous=!1,o.recognition.interimResults=!1,o.recognition.maxAlternatives=1,o.recognition.onresult=i=>{typeof i.results>"u"?(g.error("识别结果undefined"),o.recognition.onend=null,o.recording=!1,o.recognition.stop()):(o.sendMessage+=i.results[0][0].transcript,o.recording=!1)},o.recognition.onerror=i=>{g.error("语音识别出错（Web Speech API）："+i.error),o.recording=!1}):o.hasSpeech=!1};return ne(()=>{j()}),z({submitUpload:U}),(e,i)=>{const _=t("el-button"),O=t("el-input"),W=t("ele-Delete"),r=t("el-icon"),q=t("el-text"),J=t("ele-Picture"),G=t("el-upload"),H=t("ele-Microphone"),V=t("ele-VideoCamera"),b=t("el-dropdown-item"),X=t("el-dropdown-menu"),Y=t("el-dropdown"),Z=t("ele-Phone"),ee=t("ele-VideoCameraFilled"),oe=t("ele-Platform"),le=t("ele-Setting");return a(),$("div",ce,[n.chatPlan.senderQuoteAction?(a(),$("div",ue,[l(_,{type:"primary",link:"",size:"small",style:{float:"left","line-height":"26px"},onClick:D},{default:s(()=>[p("关闭")]),_:1}),me,h("pre",null,ae(`引用 ${n.chatPlan.senderQuoteData.name}: ${n.chatPlan.senderQuoteData.file&&n.chatPlan.senderQuoteData.file.fileId?"【文件】"+n.chatPlan.senderQuoteData.file.name:f.chatPlan.senderQuoteData.message}`),1)])):c("",!0),h("div",fe,[l(O,{type:"textarea",modelValue:o.sendMessage,"onUpdate:modelValue":i[0]||(i[0]=k=>o.sendMessage=k),autosize:{minRows:n.minRows,maxRows:n.maxRows},placeholder:n.placeholder,disabled:n.disabled,onKeydown:v},null,8,["modelValue","autosize","placeholder","disabled"]),h("div",be,[l(_,{type:"primary",size:"large",link:"",disabled:e.$props.disabled,title:"清空",onClick:E},{default:s(()=>[l(r,{size:20},{default:s(()=>[l(W,{title:"清空"})]),_:1})]),_:1},8,["disabled"]),l(q,{size:"small",class:"mx-1",style:{flex:"1","line-height":"normal"},tag:"i",type:e.$props.disabled?"info":"warning"},{default:s(()=>[p("Shift + Enter 换行")]),_:1},8,["type"]),de(e.$slots,"footer"),l(G,{style:{"line-height":"22px"},class:"upload-demo",ref_key:"upload",ref:w,multiple:"",action:A,"on-change":F,"before-upload":N,"on-success":L,"auto-upload":!1,"show-file-list":!1,disabled:e.$props.disabled},{default:s(()=>[l(r,{title:"选择文件",disabled:e.$props.disabled,class:"link-button",style:u([`cursor:${e.$props.disabled?"not-allowed":"pointer"};`,{margin:"5px 10px","font-size":"22px",color:"#8f959e"}])},{default:s(()=>[l(J,{title:"选择文件",disabled:e.$props.disabled},null,8,["disabled"])]),_:1},8,["disabled","style"])]),_:1},8,["disabled"]),n.hasAudio?(a(),m(r,{key:0,disabled:e.$props.disabled,title:"语音发送",onClick:T,class:"link-button",style:u([`cursor:${e.$props.disabled?"not-allowed":"pointer"};`,{margin:"5px 10px 5px 0px","font-size":"22px"}])},{default:s(()=>[l(H,{title:"语音发送",disabled:e.$props.disabled},null,8,["disabled"])]),_:1},8,["disabled","style"])):c("",!0),n.videoMode===1?(a(),m(Y,{key:1,trigger:"click",onCommand:I},{dropdown:s(()=>[l(X,null,{default:s(()=>[l(b,{command:"voice",icon:"ele-Phone",disabled:o.disableBtnVoice},{default:s(()=>[p("语音（开启/关闭）")]),_:1},8,["disabled"]),l(b,{command:"camera1",icon:"ele-VideoCamera",disabled:o.disableBtnCamera1},{default:s(()=>[p("视频1（开启/关闭）")]),_:1},8,["disabled"]),l(b,{command:"camera2",icon:"ele-VideoCameraFilled",disabled:o.disableBtnCamera2},{default:s(()=>[p("视频2（开启/关闭）")]),_:1},8,["disabled"]),l(b,{command:"share",icon:"ele-Platform",disabled:o.disableBtnShare},{default:s(()=>[p("桌面共享")]),_:1},8,["disabled"]),l(b,{command:"setting",icon:"ele-Setting",disabled:o.disableBtnSetting},{default:s(()=>[p("设置")]),_:1},8,["disabled"])]),_:1})]),default:s(()=>[h("span",ge,[n.hasVideo?(a(),m(r,{key:0,disabled:e.$props.disabled,title:"开启视频/音频",class:"link-button",style:u([`cursor:${e.$props.disabled?"not-allowed":"pointer"};`,{margin:"5px 10px 5px 0px","font-size":"22px"}])},{default:s(()=>[l(V,{title:"开启视频1",disabled:e.$props.disabled},null,8,["disabled"])]),_:1},8,["disabled","style"])):c("",!0)])]),_:1})):(a(),$(re,{key:2},[f.hasVideo?(a(),m(r,{key:0,disabled:e.$props.disabled,title:"开启语音",onClick:S,class:"link-button",style:u([`cursor:${e.$props.disabled?"not-allowed":"pointer"};`,{margin:"5px 10px 5px 0px","font-size":"22px"}])},{default:s(()=>[l(Z,{title:"开启语音",disabled:e.$props.disabled},null,8,["disabled"])]),_:1},8,["disabled","style"])):c("",!0),f.hasVideo?(a(),m(r,{key:1,disabled:e.$props.disabled,title:"开启视频1",onClick:i[1]||(i[1]=k=>y(1)),class:"link-button",style:u([`cursor:${e.$props.disabled?"not-allowed":"pointer"};`,{margin:"5px 10px 5px 0px","font-size":"22px"}])},{default:s(()=>[l(V,{title:"开启视频1",disabled:e.$props.disabled},null,8,["disabled"])]),_:1},8,["disabled","style"])):c("",!0),f.hasVideo?(a(),m(r,{key:2,disabled:e.$props.disabled,title:"开启视频2",onClick:i[2]||(i[2]=k=>y(2)),class:"link-button",style:u([`cursor:${e.$props.disabled?"not-allowed":"pointer"};`,{margin:"5px 10px 5px 0px","font-size":"22px"}])},{default:s(()=>[l(ee,{title:"开启视频2",disabled:e.$props.disabled},null,8,["disabled"])]),_:1},8,["disabled","style"])):c("",!0),f.hasVideo?(a(),m(r,{key:3,disabled:e.$props.disabled,title:"桌面共享",onClick:x,class:"link-button",style:u([`cursor:${e.$props.disabled?"not-allowed":"pointer"};`,{margin:"5px 10px 5px 0px","font-size":"22px"}])},{default:s(()=>[l(oe,{title:"桌面共享",disabled:e.$props.disabled},null,8,["disabled"])]),_:1},8,["disabled","style"])):c("",!0),f.hasVideo?(a(),m(r,{key:4,disabled:e.$props.disabled,title:"设置",onClick:R,class:"link-button",style:u([`cursor:${e.$props.disabled?"not-allowed":"pointer"};`,{margin:"5px 10px 5px 0px","font-size":"22px"}])},{default:s(()=>[l(le,{title:"设置",disabled:e.$props.disabled},null,8,["disabled"])]),_:1},8,["disabled","style"])):c("",!0)],64)),l(_,{type:"primary",size:"default",disabled:e.$props.disabled,onClick:Q},{default:s(()=>[p("发送")]),_:1},8,["disabled"])])]),l(pe(B),{ref_key:"audioDialogRef",ref:C,onSendAudio:K},null,512)])}}});export{Ze as default};
