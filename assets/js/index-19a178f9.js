import{t as Y}from"./js-table2excel-d887c4ea.js";import{S as Z}from"./sortablejs-be94e56d.js";import{s as ee}from"./pinia-a73ffef5.js";import{u as te}from"./index-fc09eadc.js";import{a as oe}from"./element-plus-77f413b4.js";import{k as I,e as ae,$ as ne,j as C,ah as r,ar as le,o as i,c as m,R as re,P as u,Q as c,W as n,T as S,F as w,a9 as x,u as g,U as V,V as ie,M as se,a as h,n as ce,bb as pe,b9 as de}from"./@vue-d9027515.js";import{_ as me}from"./plugin-vueexport-helper-c27b6911.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-a2fac16f.js";import"./vue-i18n-e0b9a81d.js";import"./@intlify-9e8a497c.js";import"./source-map-7d7e1c08.js";import"./vue-b46b26c7.js";import"./js-cookie-cf83ad76.js";import"./@element-plus-96a31696.js";import"./nprogress-8d2808ea.js";import"./axios-aba6f0e0.js";import"./qs-bbfcbdf3.js";import"./side-channel-eafc5c70.js";import"./get-intrinsic-b9397c9a.js";import"./has-symbols-e8f3ca0e.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-9ceb8f5b.js";import"./object-inspect-7b08a46e.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-0ee01be3.js";import"./lodash-es-36eb724a.js";import"./@vueuse-2d9216d7.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-6aac7dfa.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-682dc3ac.js";const ge=l=>(pe("data-v-06954d33"),l=l(),de(),l),ue={class:"table-container"},he=["src","width","height"],fe={class:"table-footer mt15"},_e={class:"table-footer-tool"},ke={class:"tool-box"},be=["data-key"],ye=ge(()=>h("i",{class:"fa fa-arrows-alt handle cursor-pointer"},null,-1)),Ce=I({name:"netxTable"}),Se=I({...Ce,props:{data:{type:Array,default:()=>[]},header:{type:Array,default:()=>[]},config:{type:Object,default:()=>{}}},emits:["delRow","pageChange","sortHeader"],setup(l,{expose:N,emit:p}){const s=l,v=ae(),T=te(),{themeConfig:L}=ee(T),t=ne({page:{pageNum:1,pageSize:10},selectlist:[],checkListAll:!0,checkListIndeterminate:!1}),A=C(()=>!!s.config.isBorder),f=C(()=>s.config),R=C(()=>s.header.filter(o=>o.isCheck)),U=o=>{o?s.header.forEach(a=>a.isCheck=!0):s.header.forEach(a=>a.isCheck=!1),t.checkListIndeterminate=!1},E=()=>{const o=s.header.filter(a=>a.isCheck).length;t.checkListAll=o===s.header.length,t.checkListIndeterminate=o>0&&o<s.header.length},B=o=>{t.selectlist=o},D=o=>{p("delRow",o)},H=o=>{t.page.pageSize=o,p("pageChange",t.page)},$=o=>{t.page.pageNum=o,p("pageChange",t.page)},j=()=>{t.page.pageNum=1,t.page.pageSize=10,p("pageChange",t.page)},P=()=>{if(t.selectlist.length<=0)return oe.warning("请先选择要导出的数据");Y(s.header,t.selectlist,`${L.value.globalTitle} ${new Date().toLocaleString()}`)},q=()=>{p("pageChange",t.page)},F=()=>{ce(()=>{const o=Z.create(v.value,{handle:".handle",dataIdAttr:"data-key",animation:150,onEnd:()=>{const a=[];o.toArray().forEach(d=>{s.header.forEach(_=>{_.key===d&&a.push({..._})})}),p("sortHeader",a)}})})};return N({pageReset:j}),(o,a)=>{const d=r("el-table-column"),_=r("el-button"),M=r("el-popconfirm"),O=r("el-empty"),W=r("el-table"),Q=r("el-pagination"),k=r("SvgIcon"),G=r("el-tooltip"),b=r("el-checkbox"),J=r("el-scrollbar"),K=r("el-popover"),X=le("loading");return i(),m("div",ue,[re((i(),u(W,se({data:l.data,border:g(A)},o.$attrs,{"row-key":"id",stripe:"",style:{width:"100%"},onSelectionChange:B}),{empty:c(()=>[n(O,{description:"暂无数据"})]),default:c(()=>[l.config.isSelection?(i(),u(d,{key:0,type:"selection","reserve-selection":!0,width:"30"})):S("",!0),l.config.isSerialNo?(i(),u(d,{key:1,type:"index",label:"序号",width:"60"})):S("",!0),(i(!0),m(w,null,x(g(R),(e,y)=>(i(),u(d,{key:y,"show-overflow-tooltip":"",prop:e.key,width:e.colWidth,label:e.title},{default:c(z=>[e.type==="image"?(i(),m("img",{key:0,src:z.row[e.key],width:e.width,height:e.height},null,8,he)):(i(),m(w,{key:1},[V(ie(z.row[e.key]),1)],64))]),_:2},1032,["prop","width","label"]))),128)),l.config.isOperate?(i(),u(d,{key:2,label:"操作",width:"100"},{default:c(e=>[n(M,{title:"确定删除吗？",onConfirm:y=>D(e.row)},{reference:c(()=>[n(_,{text:"",type:"primary"},{default:c(()=>[V("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})):S("",!0)]),_:1},16,["data","border"])),[[X,l.config.loading]]),h("div",fe,[n(Q,{"current-page":t.page.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>t.page.pageNum=e),"page-size":t.page.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>t.page.pageSize=e),"pager-count":5,"page-sizes":[10,20,30],total:l.config.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:H,onCurrentChange:$},null,8,["current-page","page-size","total"]),h("div",_e,[n(k,{name:"iconfont icon-yunxiazai_o",size:22,title:"导出",onClick:P}),n(k,{name:"iconfont icon-shuaxin",size:22,title:"刷新",onClick:q}),n(K,{placement:"top-end",trigger:"click",transition:"el-zoom-in-top","popper-class":"table-tool-popper",width:300,persistent:!1,onShow:F},{reference:c(()=>[n(k,{name:"iconfont icon-quanjushezhi_o",size:22,title:"设置"})]),default:c(()=>[h("div",ke,[n(G,{content:"拖动进行排序",placement:"top-start"},{default:c(()=>[n(k,{name:"fa fa-question-circle-o",size:17,class:"ml11",color:"#909399"})]),_:1}),n(b,{modelValue:t.checkListAll,"onUpdate:modelValue":a[2]||(a[2]=e=>t.checkListAll=e),indeterminate:t.checkListIndeterminate,class:"ml10 mr1",label:"列显示",onChange:U},null,8,["modelValue","indeterminate"]),n(b,{modelValue:g(f).isSerialNo,"onUpdate:modelValue":a[3]||(a[3]=e=>g(f).isSerialNo=e),class:"ml12 mr1",label:"序号"},null,8,["modelValue"]),n(b,{modelValue:g(f).isSelection,"onUpdate:modelValue":a[4]||(a[4]=e=>g(f).isSelection=e),class:"ml12 mr1",label:"多选"},null,8,["modelValue"])]),n(J,null,{default:c(()=>[h("div",{ref_key:"toolSetRef",ref:v,class:"tool-sortable"},[(i(!0),m(w,null,x(l.header,e=>(i(),m("div",{class:"tool-sortable-item",key:e.key,"data-key":e.key},[ye,n(b,{modelValue:e.isCheck,"onUpdate:modelValue":y=>e.isCheck=y,size:"default",class:"ml12 mr8",label:e.title,onChange:E},null,8,["modelValue","onUpdate:modelValue","label"])],8,be))),128))],512)]),_:1})]),_:1})])])])}}});const rt=me(Se,[["__scopeId","data-v-06954d33"]]);export{rt as default};
