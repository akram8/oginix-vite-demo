import{d as V,M as I,R as P,S as B,U as x,u as E,s as h,a as D,y as f,N as M,z as _,m as d,o as S,V as U,b as O,P as b,c as j,e as l,f as z,j as r,k as c,T as w,B as t,J as R,w as y,v as K,K as J,W,_ as q}from"./index-f97ca1e0.js";const F={class:"layout-parent"},G=V({name:"layoutParentView"}),X=V({...G,setup(H){const g=I(()=>q(()=>import("./iframes-316fc692.js"),["assets/js/iframes-316fc692.js","assets/js/index-f97ca1e0.js","assets/css/index-a7bdd87a.css"])),i=P(),A=B(),T=x(),k=E(),{keepAliveNames:n,cachedViews:p}=h(T),{themeConfig:m}=h(k),e=D({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),u=f(()=>m.value.animation),L=f(()=>m.value.isTagsview?p.value:e.keepAliveNameList),v=f(()=>i.meta.isIframe),N=async()=>{A.getRoutes().forEach(s=>{s.meta.isIframe&&(s.meta.isIframeOpen=!1,s.meta.loading=!0,e.iframeList.push({...s}))})};return M(()=>{e.keepAliveNameList=n.value,_.on("onTagsViewRefreshRouterView",s=>{e.keepAliveNameList=n.value.filter(a=>i.name!==a),e.refreshRouterViewKey="",e.iframeRefreshKey="",d(()=>{e.refreshRouterViewKey=s,e.iframeRefreshKey=s,e.keepAliveNameList=n.value})})}),S(()=>{N(),d(()=>{setTimeout(()=>{if(m.value.isCacheTagsView){let s=U.get("tagsViewList")||[];p.value=s.filter(a=>{var o;return(o=a.meta)==null?void 0:o.isKeepAlive}).map(a=>a.name)}},0)})}),O(()=>{_.off("onTagsViewRefreshRouterView",()=>{})}),b(()=>i.fullPath,()=>{e.refreshRouterViewKey=decodeURI(i.fullPath)},{immediate:!0}),(s,a)=>{const o=j("router-view");return l(),z("div",F,[r(o,null,{default:c(({Component:C})=>[r(w,{name:t(u),mode:"out-in"},{default:c(()=>[(l(),R(W,{include:t(L)},[y((l(),R(J(C),{key:e.refreshRouterViewKey,class:"w100"})),[[K,!t(v)]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),r(w,{name:t(u),mode:"out-in"},{default:c(()=>[y(r(t(g),{class:"w100",refreshKey:e.iframeRefreshKey,name:t(u),list:e.iframeList},null,8,["refreshKey","name","list"]),[[K,t(v)]])]),_:1},8,["name"])])}}});export{X as default};
